(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{EycR:function(t,e,n){"use strict";n.r(e);var r=n("8Y7J");class i{}var o=n("pMnS");const s={Move:"move",Resize:"resize",Pinch:"pinch"};class a{constructor(t,e){this.sanitizer=t,this.cd=e,this.Hammer="undefined"!=typeof window?window.Hammer:null,this.setImageMaxSizeRetries=0,this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.exifTransform={rotate:0,flip:!1},this.autoRotateSupported=new Promise(t=>{const e=new Image;e.onload=()=>{t(1===e.width&&2===e.height)},e.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="}),this.stepSize=3,this.marginLeft="0px",this.imageVisible=!1,this.moveTypes=s,this.format="png",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage="center",this.disabled=!1,this.imageCropped=new r.m,this.startCropImage=new r.m,this.imageLoaded=new r.m,this.cropperReady=new r.m,this.loadImageFailed=new r.m,this.initCropper()}ngOnChanges(t){this.onChangesInputImage(t),this.originalImage&&this.originalImage.complete&&this.exifTransform&&(t.containWithinAspectRatio||t.canvasRotation)&&this.transformOriginalImage(),t.cropper&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.checkCropperPosition(!1),this.doAutoCrop(),this.cd.markForCheck()),t.aspectRatio&&this.imageVisible&&this.resetCropperPosition(),t.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop())}onChangesInputImage(t){(t.imageChangedEvent||t.imageURL||t.imageBase64||t.imageFile)&&this.initCropper(),t.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),t.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),t.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),t.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){return this.imageChangedEvent&&this.imageChangedEvent.target&&this.imageChangedEvent.target.files&&this.imageChangedEvent.target.files.length>0}setCssTransform(){this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle("scaleX("+(this.transform.scale||1)*(this.transform.flipH?-1:1)+")scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+")rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.stepSize=this.initialStepSize,this.activatePinchGesture()}initCropper(){this.imageVisible=!1,this.transformedImage=null,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.originalSize={width:0,height:0},this.transformedSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImage(t,e){this.isValidImageType(e)?this.loadBase64Image(t):this.loadImageFailed.emit()}loadImageFile(t){const e=new FileReader;e.onload=e=>this.loadImage(e.target.result,t.type),e.readAsDataURL(t)}isValidImageType(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff|webp)/.test(t)}loadBase64Image(t){this.autoRotateSupported.then(e=>this.checkExifAndLoadBase64Image(t,e)).then(()=>this.transformOriginalImage()).catch(t=>{this.loadImageFailed.emit(),this.originalImage=null,this.originalBase64=null,console.error(t)})}checkExifAndLoadBase64Image(t,e){return new Promise((n,r)=>{this.originalImage=new Image,this.originalImage.onload=()=>{this.originalBase64=t,this.exifTransform=function(t){switch("string"==typeof t&&(t=function(t){const e=new DataView(function(t){t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");const e=atob(t),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.charCodeAt(i);return r.buffer}(t));if(65496!=e.getUint16(0,!1))return-2;const n=e.byteLength;let r=2;for(;r<n;){if(e.getUint16(r+2,!1)<=8)return-1;const t=e.getUint16(r,!1);if(r+=2,65505==t){if(1165519206!=e.getUint32(r+=2,!1))return-1;const t=18761==e.getUint16(r+=6,!1);r+=e.getUint32(r+4,t);const n=e.getUint16(r,t);r+=2;for(let i=0;i<n;i++)if(274==e.getUint16(r+12*i,t))return e.getUint16(r+12*i+8,t)}else{if(65280!=(65280&t))break;r+=e.getUint16(r,!1)}}return-1}(t)),t){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}(e?-1:t),this.originalSize.width=this.originalImage.naturalWidth,this.originalSize.height=this.originalImage.naturalHeight,n()},this.originalImage.onerror=r,this.originalImage.src=t})}loadImageFromURL(t){const e=new Image;e.onerror=()=>this.loadImageFailed.emit(),e.onload=()=>{const t=document.createElement("canvas"),n=t.getContext("2d");t.width=e.width,t.height=e.height,n.drawImage(e,0,0),this.loadBase64Image(t.toDataURL())},e.crossOrigin="anonymous",e.src=t}transformOriginalImage(){if(!this.originalImage||!this.originalImage.complete||!this.exifTransform)return Promise.reject(new Error("No image loaded"));const t=this.transformImageBase64();return this.setTransformedImage(t)}transformImageBase64(){const t=this.canvasRotation+this.exifTransform.rotate;if(0===t&&!this.exifTransform.flip&&!this.containWithinAspectRatio)return this.originalBase64;const e=this.getTransformedSize(),n=document.createElement("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");return r.setTransform(this.exifTransform.flip?-1:1,0,0,1,n.width/2,n.height/2),r.rotate(Math.PI*(t/2)),r.drawImage(this.originalImage,-this.originalSize.width/2,-this.originalSize.height/2),n.toDataURL()}getTransformedSize(){const t=this.canvasRotation+this.exifTransform.rotate;if(this.containWithinAspectRatio){if(t%2){const t=this.originalSize.height/this.aspectRatio;return{width:Math.max(this.originalSize.height,this.originalSize.width*this.aspectRatio),height:Math.max(this.originalSize.width,t)}}{const t=this.originalSize.width/this.aspectRatio;return{width:Math.max(this.originalSize.width,this.originalSize.height*this.aspectRatio),height:Math.max(this.originalSize.height,t)}}}return t%2?{height:this.originalSize.width,width:this.originalSize.height}:{width:this.originalSize.width,height:this.originalSize.height}}setTransformedImage(t){return new Promise(e=>{this.transformedBase64=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t),this.transformedImage=new Image,this.transformedImage.onload=()=>{this.transformedSize.width=this.transformedImage.naturalWidth,this.transformedSize.height=this.transformedImage.naturalHeight,this.cd.markForCheck(),e()},this.transformedImage.src=this.transformedBase64})}imageLoadedInView(){null!=this.transformedImage&&(this.imageLoaded.emit(),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.resetCropperPosition(),this.cropperReady.emit(Object.assign({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){return this.sourceImage&&this.sourceImage.nativeElement&&this.sourceImage.nativeElement.offsetWidth>0}onResize(){this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize()}activatePinchGesture(){if(this.Hammer){const t=new this.Hammer(this.wrapper.nativeElement);t.get("pinch").set({enable:!0}),t.on("pinchmove",this.onPinch.bind(this)),t.on("pinchend",this.pinchStop.bind(this)),t.on("pinchstart",this.startPinch.bind(this))}else Object(r.U)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")}resizeCropperPosition(){const t=this.sourceImage.nativeElement;this.maxSize.width===t.offsetWidth&&this.maxSize.height===t.offsetHeight||(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)}resetCropperPosition(){const t=this.sourceImage.nativeElement;if(this.maintainAspectRatio)if(t.offsetWidth/this.aspectRatio<t.offsetHeight){this.cropper.x1=0,this.cropper.x2=t.offsetWidth;const e=t.offsetWidth/this.aspectRatio;this.cropper.y1=(t.offsetHeight-e)/2,this.cropper.y2=this.cropper.y1+e}else{this.cropper.y1=0,this.cropper.y2=t.offsetHeight;const e=t.offsetHeight*this.aspectRatio;this.cropper.x1=(t.offsetWidth-e)/2,this.cropper.x2=this.cropper.x1+e}else this.cropper.x1=0,this.cropper.x2=t.offsetWidth,this.cropper.y1=0,this.cropper.y2=t.offsetHeight;this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(t){this.changeKeyboardStepSize(t),this.keyboardMoveCropper(t)}changeKeyboardStepSize(t){t.key>="1"&&t.key<="9"&&(this.stepSize=+t.key)}keyboardMoveCropper(t){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(t.key))return;const e=t.shiftKey?s.Resize:s.Move,n=t.altKey?this.getInvertedPositionForKey(t.key):this.getPositionForKey(t.key),r=this.getEventForKey(t.key,this.stepSize);t.preventDefault(),t.stopPropagation(),this.startMove({clientX:0,clientY:0},e,n),this.moveImg(r),this.moveStop()}getPositionForKey(t){switch(t){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";case"ArrowLeft":default:return"left"}}getInvertedPositionForKey(t){switch(t){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";case"ArrowLeft":default:return"right"}}getEventForKey(t,e){switch(t){case"ArrowUp":return{clientX:0,clientY:-1*e};case"ArrowRight":return{clientX:e,clientY:0};case"ArrowDown":return{clientX:0,clientY:e};case"ArrowLeft":default:return{clientX:-1*e,clientY:0}}}startMove(t,e,n=null){this.moveStart&&this.moveStart.active&&this.moveStart.type===s.Pinch||(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:e,position:n,clientX:this.getClientX(t),clientY:this.getClientY(t)},this.cropper))}startPinch(t){this.safeImgDataUrl&&(t.preventDefault&&t.preventDefault(),this.moveStart=Object.assign({active:!0,type:s.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2},this.cropper))}moveImg(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===s.Move?(this.move(t),this.checkCropperPosition(!0)):this.moveStart.type===s.Resize&&(this.resize(t),this.checkCropperPosition(!1)),this.cd.detectChanges())}onPinch(t){this.moveStart.active&&(t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),this.moveStart.type===s.Pinch&&(this.resize(t),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){this.transformedImage?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.transformedImage.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.transformedImage.height*this.maxSize.height):20}checkCropperPosition(t=!1){this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}move(t){const e=this.getClientX(t)-this.moveStart.clientX,n=this.getClientY(t)-this.moveStart.clientY;this.cropper.x1=this.moveStart.x1+e,this.cropper.y1=this.moveStart.y1+n,this.cropper.x2=this.moveStart.x2+e,this.cropper.y2=this.moveStart.y2+n}resize(t){const e=this.getClientX(t)-this.moveStart.clientX,n=this.getClientY(t)-this.moveStart.clientY;switch(this.moveStart.position){case"left":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth);break;case"topleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+n,this.cropper.y2-this.cropperScaledMinHeight);break;case"top":this.cropper.y1=Math.min(this.moveStart.y1+n,this.cropper.y2-this.cropperScaledMinHeight);break;case"topright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+n,this.cropper.y2-this.cropperScaledMinHeight);break;case"right":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth);break;case"bottomright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+n,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottom":this.cropper.y2=Math.max(this.moveStart.y2+n,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottomleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+n,this.cropper.y1+this.cropperScaledMinHeight);break;case"center":const r=t.scale,i=Math.abs(this.moveStart.x2-this.moveStart.x1)*r,o=Math.abs(this.moveStart.y2-this.moveStart.y1)*r,s=this.cropper.x1,a=this.cropper.y1;this.cropper.x1=Math.min(this.moveStart.clientX-i/2,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.clientY-o/2,this.cropper.y2-this.cropperScaledMinHeight),this.cropper.x2=Math.max(this.moveStart.clientX+i/2,s+this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.clientY+o/2,a+this.cropperScaledMinHeight)}this.maintainAspectRatio&&this.checkAspectRatio()}checkAspectRatio(){let t=0,e=0;switch(this.moveStart.position){case"top":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"bottom":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topleft":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topright":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"right":case"bottomright":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"left":case"bottomleft":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"center":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio;const n=Math.max(0-this.cropper.x1,0),r=Math.max(this.cropper.x2-this.maxSize.width,0),i=Math.max(this.cropper.y2-this.maxSize.height,0),o=Math.max(0-this.cropper.y1,0);(n>0||r>0||i>0||o>0)&&(this.cropper.x1+=i*this.aspectRatio>n?i*this.aspectRatio:n,this.cropper.x2-=o*this.aspectRatio>r?o*this.aspectRatio:r,this.cropper.y1+=o*this.aspectRatio>r?o:r/this.aspectRatio,this.cropper.y2-=i*this.aspectRatio>n?i:n/this.aspectRatio)}}doAutoCrop(){this.autoCrop&&this.crop()}crop(){if(this.sourceImage&&this.sourceImage.nativeElement&&null!=this.transformedImage){this.startCropImage.emit();const t=this.getImagePosition(),e=t.x2-t.x1,n=t.y2-t.y1,r=document.createElement("canvas");r.width=e,r.height=n;const i=r.getContext("2d");if(i){null!=this.backgroundColor&&(i.fillStyle=this.backgroundColor,i.fillRect(0,0,e,n));const o=(this.transform.scale||1)*(this.transform.flipH?-1:1),s=(this.transform.scale||1)*(this.transform.flipV?-1:1);i.setTransform(o,0,0,s,this.transformedSize.width/2,this.transformedSize.height/2),i.translate(-t.x1/o,-t.y1/s),i.rotate((this.transform.rotate||0)*Math.PI/180),i.drawImage(this.transformedImage,-this.transformedSize.width/2,-this.transformedSize.height/2);const a={width:e,height:n,imagePosition:t,cropperPosition:Object.assign({},this.cropper)};this.containWithinAspectRatio&&(a.offsetImagePosition=this.getOffsetImagePosition());const l=this.getResizeRatio(e,n);return 1!==l&&(a.width=Math.round(e*l),a.height=this.maintainAspectRatio?Math.round(a.width/this.aspectRatio):Math.round(n*l),function(t,e,n){const r=t.width,i=t.height,o=r/(e=Math.round(e)),s=i/(n=Math.round(n)),a=Math.ceil(o/2),l=Math.ceil(s/2),u=t.getContext("2d");if(u){const c=u.getImageData(0,0,r,i),h=u.createImageData(e,n),p=c.data,f=h.data;for(let t=0;t<n;t++)for(let n=0;n<e;n++){const u=4*(n+t*e),c=t*s;let h=0,d=0,g=0,m=0,b=0,v=0,_=0;const y=Math.floor(n*o),w=Math.floor(t*s);let x=Math.ceil((n+1)*o),C=Math.ceil((t+1)*s);x=Math.min(x,r),C=Math.min(C,i);for(let t=w;t<C;t++){const e=Math.abs(c-t)/l,i=n*o,s=e*e;for(let n=y;n<x;n++){const e=Math.abs(i-n)/a,o=Math.sqrt(s+e*e);if(o>=1)continue;h=2*o*o*o-3*o*o+1;const l=4*(n+t*r);_+=h*p[l+3],g+=h,p[l+3]<255&&(h=h*p[l+3]/250),m+=h*p[l],b+=h*p[l+1],v+=h*p[l+2],d+=h}}f[u]=m/d,f[u+1]=b/d,f[u+2]=v/d,f[u+3]=_/g}t.width=e,t.height=n,u.putImageData(h,0,0)}}(r,a.width,a.height)),a.base64=this.cropToBase64(r),this.imageCropped.emit(a),a}}return null}getImagePosition(){const t=this.transformedSize.width/this.sourceImage.nativeElement.offsetWidth,e={x1:Math.round(this.cropper.x1*t),y1:Math.round(this.cropper.y1*t),x2:Math.round(this.cropper.x2*t),y2:Math.round(this.cropper.y2*t)};return this.containWithinAspectRatio||(e.x1=Math.max(e.x1,0),e.y1=Math.max(e.y1,0),e.x2=Math.min(e.x2,this.transformedSize.width),e.y2=Math.min(e.y2,this.transformedSize.height)),e}getOffsetImagePosition(){const t=this.transformedSize.width/this.sourceImage.nativeElement.offsetWidth;let e,n;(this.canvasRotation+this.exifTransform.rotate)%2?(e=(this.transformedSize.width-this.originalSize.height)/2,n=(this.transformedSize.height-this.originalSize.width)/2):(e=(this.transformedSize.width-this.originalSize.width)/2,n=(this.transformedSize.height-this.originalSize.height)/2);const r={x1:Math.round(this.cropper.x1*t)-e,y1:Math.round(this.cropper.y1*t)-n,x2:Math.round(this.cropper.x2*t)-e,y2:Math.round(this.cropper.y2*t)-n};return this.containWithinAspectRatio||(r.x1=Math.max(r.x1,0),r.y1=Math.max(r.y1,0),r.x2=Math.min(r.x2,this.transformedSize.width),r.y2=Math.min(r.y2,this.transformedSize.height)),r}cropToBase64(t){return t.toDataURL("image/"+this.format,this.getQuality())}getQuality(){return Math.min(1,Math.max(0,this.imageQuality/100))}getResizeRatio(t,e){if(this.resizeToWidth>0){if(!this.onlyScaleDown||t>this.resizeToWidth)return this.resizeToWidth/t}else if(this.resizeToHeight>0&&(!this.onlyScaleDown||e>this.resizeToHeight))return this.resizeToHeight/e;return 1}getClientX(t){return(t.touches&&t.touches[0]?t.touches[0].clientX:t.clientX)||0}getClientY(t){return(t.touches&&t.touches[0]?t.touches[0].clientY:t.clientY)||0}}class l{}var u=n("SVse"),c=n("cUpR"),h=r.ob({encapsulation:0,styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color,#fff) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:0 0;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color,rgba(255,255,255,.3)) solid 100vw;touch-action:none}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;bottom:0;left:0;right:0;pointer-events:none;border:1px dashed;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:focus   .move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]{display:inline-block;background:#53535c;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw rgba(255,255,255,.3);box-shadow:0 0 0 100vw var(--cropper-outline-color,rgba(255,255,255,.3))}@media (orientation:portrait){[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{outline-width:100vh}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh rgba(255,255,255,.3);box-shadow:0 0 0 100vh var(--cropper-outline-color,rgba(255,255,255,.3))}}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{display:none}'],data:{}});function p(t){return r.Ib(0,[(t()(),r.qb(0,0,[[2,0],["sourceImage",1]],null,0,"img",[["class","source-image"]],[[8,"src",4],[4,"visibility",null],[4,"transform",null]],[[null,"load"]],(function(t,e,n){var r=!0;return"load"===e&&(r=!1!==t.component.imageLoadedInView()&&r),r}),null,null))],null,(function(t,e){var n=e.component;t(e,0,0,n.safeImgDataUrl,n.imageVisible?"visible":"hidden",n.safeTransformStyle)}))}function f(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,20,null,null,null,null,null,null,null)),(t()(),r.qb(1,0,null,null,1,"span",[["class","resize topleft"]],null,[[null,"mousedown"],[null,"touchstart"]],(function(t,e,n){var r=!0,i=t.component;return"mousedown"===e&&(r=!1!==i.startMove(n,i.moveTypes.Resize,"topleft")&&r),"touchstart"===e&&(r=!1!==i.startMove(n,i.moveTypes.Resize,"topleft")&&r),r}),null,null)),(t()(),r.qb(2,0,null,null,0,"span",[["class","square"]],null,null,null,null,null)),(t()(),r.qb(3,0,null,null,1,"span",[["class","resize top"]],null,null,null,null,null)),(t()(),r.qb(4,0,null,null,0,"span",[["class","square"]],null,null,null,null,null)),(t()(),r.qb(5,0,null,null,1,"span",[["class","resize topright"]],null,[[null,"mousedown"],[null,"touchstart"]],(function(t,e,n){var r=!0,i=t.component;return"mousedown"===e&&(r=!1!==i.startMove(n,i.moveTypes.Resize,"topright")&&r),"touchstart"===e&&(r=!1!==i.startMove(n,i.moveTypes.Resize,"topright")&&r),r}),null,null)),(t()(),r.qb(6,0,null,null,0,"span",[["class","square"]],null,null,null,null,null)),(t()(),r.qb(7,0,null,null,1,"span",[["class","resize right"]],null,null,null,null,null)),(t()(),r.qb(8,0,null,null,0,"span",[["class","square"]],null,null,null,null,null)),(t()(),r.qb(9,0,null,null,1,"span",[["class","resize bottomright"]],null,[[null,"mousedown"],[null,"touchstart"]],(function(t,e,n){var r=!0,i=t.component;return"mousedown"===e&&(r=!1!==i.startMove(n,i.moveTypes.Resize,"bottomright")&&r),"touchstart"===e&&(r=!1!==i.startMove(n,i.moveTypes.Resize,"bottomright")&&r),r}),null,null)),(t()(),r.qb(10,0,null,null,0,"span",[["class","square"]],null,null,null,null,null)),(t()(),r.qb(11,0,null,null,1,"span",[["class","resize bottom"]],null,null,null,null,null)),(t()(),r.qb(12,0,null,null,0,"span",[["class","square"]],null,null,null,null,null)),(t()(),r.qb(13,0,null,null,1,"span",[["class","resize bottomleft"]],null,[[null,"mousedown"],[null,"touchstart"]],(function(t,e,n){var r=!0,i=t.component;return"mousedown"===e&&(r=!1!==i.startMove(n,i.moveTypes.Resize,"bottomleft")&&r),"touchstart"===e&&(r=!1!==i.startMove(n,i.moveTypes.Resize,"bottomleft")&&r),r}),null,null)),(t()(),r.qb(14,0,null,null,0,"span",[["class","square"]],null,null,null,null,null)),(t()(),r.qb(15,0,null,null,1,"span",[["class","resize left"]],null,null,null,null,null)),(t()(),r.qb(16,0,null,null,0,"span",[["class","square"]],null,null,null,null,null)),(t()(),r.qb(17,0,null,null,0,"span",[["class","resize-bar top"]],null,[[null,"mousedown"],[null,"touchstart"]],(function(t,e,n){var r=!0,i=t.component;return"mousedown"===e&&(r=!1!==i.startMove(n,i.moveTypes.Resize,"top")&&r),"touchstart"===e&&(r=!1!==i.startMove(n,i.moveTypes.Resize,"top")&&r),r}),null,null)),(t()(),r.qb(18,0,null,null,0,"span",[["class","resize-bar right"]],null,[[null,"mousedown"],[null,"touchstart"]],(function(t,e,n){var r=!0,i=t.component;return"mousedown"===e&&(r=!1!==i.startMove(n,i.moveTypes.Resize,"right")&&r),"touchstart"===e&&(r=!1!==i.startMove(n,i.moveTypes.Resize,"right")&&r),r}),null,null)),(t()(),r.qb(19,0,null,null,0,"span",[["class","resize-bar bottom"]],null,[[null,"mousedown"],[null,"touchstart"]],(function(t,e,n){var r=!0,i=t.component;return"mousedown"===e&&(r=!1!==i.startMove(n,i.moveTypes.Resize,"bottom")&&r),"touchstart"===e&&(r=!1!==i.startMove(n,i.moveTypes.Resize,"bottom")&&r),r}),null,null)),(t()(),r.qb(20,0,null,null,0,"span",[["class","resize-bar left"]],null,[[null,"mousedown"],[null,"touchstart"]],(function(t,e,n){var r=!0,i=t.component;return"mousedown"===e&&(r=!1!==i.startMove(n,i.moveTypes.Resize,"left")&&r),"touchstart"===e&&(r=!1!==i.startMove(n,i.moveTypes.Resize,"left")&&r),r}),null,null))],null,null)}function d(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,3,"div",[["class","cropper"],["tabindex","0"]],[[2,"rounded",null],[4,"top","px"],[4,"left","px"],[4,"width","px"],[4,"height","px"],[4,"margin-left",null],[4,"visibility",null]],[[null,"keydown"]],(function(t,e,n){var r=!0;return"keydown"===e&&(r=!1!==t.component.keyboardAccess(n)&&r),r}),null,null)),(t()(),r.qb(1,0,null,null,0,"div",[["class","move"]],null,[[null,"mousedown"],[null,"touchstart"]],(function(t,e,n){var r=!0,i=t.component;return"mousedown"===e&&(r=!1!==i.startMove(n,i.moveTypes.Move)&&r),"touchstart"===e&&(r=!1!==i.startMove(n,i.moveTypes.Move)&&r),r}),null,null)),(t()(),r.fb(16777216,null,null,1,null,f)),r.pb(3,16384,null,0,u.j,[r.N,r.J],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,3,0,!e.component.hideResizeSquares)}),(function(t,e){var n=e.component;t(e,0,0,n.roundCropper,n.cropper.y1,n.cropper.x1,n.cropper.x2-n.cropper.x1,n.cropper.y2-n.cropper.y1,"center"===n.alignImage?n.marginLeft:null,n.imageVisible?"visible":"hidden")}))}function g(t){return r.Ib(2,[r.Fb(402653184,1,{wrapper:0}),r.Fb(671088640,2,{sourceImage:0}),(t()(),r.qb(2,0,[[1,0],["wrapper",1]],null,5,"div",[],[[4,"background",null]],null,null,null,null)),(t()(),r.fb(16777216,null,null,1,null,p)),r.pb(4,16384,null,0,u.j,[r.N,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.qb(5,0,null,null,0,"div",[["class","overlay"]],[[4,"width","px"],[4,"height","px"],[4,"margin-left",null]],null,null,null,null)),(t()(),r.fb(16777216,null,null,1,null,d)),r.pb(7,16384,null,0,u.j,[r.N,r.J],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,4,0,n.safeImgDataUrl),t(e,7,0,n.imageVisible)}),(function(t,e){var n=e.component;t(e,2,0,n.imageVisible&&n.backgroundColor),t(e,5,0,n.maxSize.width,n.maxSize.height,"center"===n.alignImage?n.marginLeft:null)}))}var m=n("nYR2");class b{constructor(t,e,n){this._userService=t,this.afStorage=e,this._chatService=n,this.imgSrc="../../../assets/images/defaultProfile.png",this.imgSelected=!1,this.globalUser=!1,this.showUploading=!1,this.imageChangedEvent="",this.croppedImage=""}ngOnInit(){this.user=this._userService.getProfileUser();var t=JSON.parse(localStorage.getItem("LoggedInUser"))._id;this.user._id==t&&(this.globalUser=!0),this.croppedImage=this.user.profilePicUrl}close(){this._userService.showDialog.emit(!1)}fileChangeEvent(t){this.imageChangedEvent=t,this.imgSelected=!0}imageCropped(t){this.croppedImage=t.base64}uploadfile(){this.showUploading=!0;const t=this.croppedImage.split(/,(.+)/)[1],e=atob(t);let n=e.length;const r=new Uint8Array(n);for(;n--;)r[n]=e.charCodeAt(n);const i=new File([r],this.user._id,{type:"image/png"});var o="/chat-app-profile-pics/"+this.user._id;const s=this.afStorage.ref(o);this.afStorage.upload(o,i).snapshotChanges().pipe(Object(m.a)(()=>{s.getDownloadURL().subscribe(t=>{this._userService.updateProfilePic(this.user._id,{url:t}).subscribe(e=>{this.user.profilePicUrl=t,this._userService.setUser(this.user),this.showUploading=!1,this.close()},t=>{console.log(t),this.showUploading=!1})},t=>{console.log(t),this.showUploading=!1})})).subscribe(t=>{console.log(t),this.showUploading=!1})}}var v=n("Ouoq"),_=n("HDdC"),y=n("lJxs");function w(t){const e=function(t){return new _.a(e=>(t.on("state_changed",t=>e.next(t),t=>e.error(t),()=>e.complete()),()=>t.cancel()))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Object(y.a)(t=>t.bytesTransferred/t.totalBytes*100))}}var x=n("Cfvw");function C(t,e,n){return{getDownloadURL:()=>Object(x.a)(t.getDownloadURL(),e.outsideAngular).pipe(n),getMetadata:()=>Object(x.a)(t.getMetadata()).pipe(n),delete:()=>Object(x.a)(t.delete()),child:r=>C(t.child(r),e,n),updateMetatdata:e=>Object(x.a)(t.updateMetadata(e)),updateMetadata:e=>Object(x.a)(t.updateMetadata(e)),put:(e,n)=>w(t.put(e,n)),putString:(e,n,r)=>w(t.putString(e,n,r))}}var A=n("quSY");class S extends A.a{constructor(t,e){super()}schedule(t,e=0){return this}}class O extends S{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}class M extends O{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}let P=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class k extends P{constructor(t,e=P.now){super(t,()=>k.delegate&&k.delegate!==this?k.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return k.delegate&&k.delegate!==this?k.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}class R extends k{}const E=new R(M),I=new k(O);var T=n("vkgz");let z=1;const U={},q={setImmediate(t){const e=z++;return U[e]=t,Promise.resolve().then(()=>function(t){const e=U[t];e&&e()}(e)),e},clearImmediate(t){delete U[t]}};class B extends O{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=q.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(q.clearImmediate(e),t.scheduled=void 0)}}class L extends k{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const N=new L(B);var D=n("DH7j");class j extends _.a{constructor(t,e=0,n=N){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(D.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=N)}static create(t,e=0,n=N){return new j(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(j.dispatch,this.delayTime,{source:this.source,subscriber:t})}}class F{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new j(e,this.delay,this.scheduler).subscribe(t)}}var W=n("7o/Q"),H=n("EY2u"),V=n("LRne");let Q=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(V.a)(this.value);case"E":return t=this.error,new _.a(e=>e.error(t));case"C":return Object(H.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();class G{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new X(t,this.scheduler,this.delay))}}class X extends W.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(X.dispatch,this.delay,new Y(t,this.destination)))}_next(t){this.scheduleMessage(Q.createNext(t))}_error(t){this.scheduleMessage(Q.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(Q.createComplete()),this.unsubscribe()}}class Y{constructor(t,e){this.notification=t,this.destination=e}}function J(){}class K{constructor(t,e=E){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule((function(e){r.runGuarded(()=>{t.apply(this,[e])})}),e,n)}}class ${constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",J,{},J,J)),e.pipe(Object(T.a)(n,n,n)).subscribe(t).add(n)}unscheduleTask(){null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)}}class Z{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new K(Zone.current)),this.insideAngular=t.run(()=>new K(Zone.current,I))}}var tt,et=n("Wcq6"),nt=n.n(et);const rt=new r.o("angularfire2.app.options"),it=new r.o("angularfire2.app.nameOrConfig"),ot=rt,st=it;class at{}const lt=new r.M("5.4.2");function ut(t,e,n){const r="object"==typeof n&&n||{};return r.name=r.name||"string"==typeof n&&n||"[DEFAULT]",nt.a.apps.filter(t=>t&&t.name===r.name)[0]||e.runOutsideAngular(()=>nt.a.initializeApp(t,r))}let ct=tt=class{constructor(t){nt.a.registerVersion&&(nt.a.registerVersion("angularfire",lt.full,t.toString()),nt.a.registerVersion("angular",r.L.full))}static initializeApp(t,e){return{ngModule:tt,providers:[{provide:ot,useValue:t},{provide:st,useValue:e}]}}};const ht=new r.o("angularfire2.storageBucket");let pt=class{constructor(t,e,n,r,i){this.schedulers=new Z(i),this.keepUnstableUntilFirst=function(t,e){return function(n){return Object(u.p)(e)&&(n=n.lift(new $(t.ngZone))),n.pipe(function(t,e=0){return function(n){return n.lift(new F(t,e))}}(t.outsideAngular),function(t,e=0){return function(n){return n.lift(new G(t,e))}}(t.insideAngular))}}(this.schedulers,r),this.storage=i.runOutsideAngular(()=>ut(t,i,e).storage(n||void 0))}ref(t){return C(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return C(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}};var ft=n("jHPu"),dt=r.ob({encapsulation:0,styles:[[".profilecontent[_ngcontent-%COMP%]{margin:0;padding:3rem 2rem;width:20rem;height:30rem;background-color:#20242f!important;border-radius:5px;color:#fff;text-align:center;position:relative;transform:scale(0);-webkit-animation:.3s forwards showDialog;animation:.3s forwards showDialog}.profilecontent[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{position:absolute;right:1rem;top:1rem;height:1.2rem;width:1.2rem}.profilecontent[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{cursor:pointer}.profilecontent[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{padding:1rem;font-size:1.3rem;font-weight:700}.imguploader[_ngcontent-%COMP%]{padding:1rem}.imguploader[_ngcontent-%COMP%]:hover{cursor:pointer}.profilecontent[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:8rem;width:8rem;border-radius:50%;margin-bottom:.5rem}.profilecontent[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:.3rem 3rem;font-size:.9rem;text-align:center;border:none;margin:.5rem 0;border-radius:20px;color:#fff;background-image:linear-gradient(to right bottom,#f54b64,#f75b61,#f76960,#f77660,#f78361)}.profilecontent[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:focus{outline:0}.details[_ngcontent-%COMP%]{padding-top:1rem}.details[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:.5rem 0}.details[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .details[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:1rem;font-weight:100}.details[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:rgba(255,255,255,.3)}@-webkit-keyframes showDialog{0%{transform:scale(0)}100%{transform:scale(1)}}@keyframes showDialog{0%{transform:scale(0)}100%{transform:scale(1)}}.img-cropper[_ngcontent-%COMP%]{padding:1px;height:100%;max-height:10rem}.show-uploading[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%;top:0;left:0;display:flex;align-items:center;justify-content:center;background-color:rgba(0,0,0,.7);z-index:999}"]],data:{}});function gt(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,3,"div",[["class","show-uploading"]],null,null,null,null,null)),(t()(),r.qb(1,0,null,null,2,"div",[["class","spinner-border text-light"],["role","status"]],null,null,null,null,null)),(t()(),r.qb(2,0,null,null,1,"span",[["class","sr-only"]],null,null,null,null,null)),(t()(),r.Hb(-1,null,["Loading..."]))],null,null)}function mt(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),r.Hb(-1,null,["Edit Profile"]))],null,null)}function bt(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),r.Hb(-1,null,["Profile"]))],null,null)}function vt(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,1,"image-cropper",[["class","img-cropper"]],[[4,"text-align",null],[2,"disabled",null]],[[null,"imageCropped"],["window","resize"],["document","mousemove"],["document","touchmove"],["document","mouseup"],["document","touchend"]],(function(t,e,n){var i=!0,o=t.component;return"window:resize"===e&&(i=!1!==r.Bb(t,1).onResize()&&i),"document:mousemove"===e&&(i=!1!==r.Bb(t,1).moveImg(n)&&i),"document:touchmove"===e&&(i=!1!==r.Bb(t,1).moveImg(n)&&i),"document:mouseup"===e&&(i=!1!==r.Bb(t,1).moveStop()&&i),"document:touchend"===e&&(i=!1!==r.Bb(t,1).moveStop()&&i),"imageCropped"===e&&(i=!1!==o.imageCropped(n)&&i),i}),g,h)),r.pb(1,638976,null,0,a,[c.b,r.h],{imageChangedEvent:[0,"imageChangedEvent"],resizeToWidth:[1,"resizeToWidth"]},{imageCropped:"imageCropped"})],(function(t,e){t(e,1,0,e.component.imageChangedEvent,200)}),(function(t,e){t(e,0,0,r.Bb(e,1).alignImage,r.Bb(e,1).disabled)}))}function _t(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,1,"button",[["class","btn"],["type","submit"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.uploadfile()&&r),r}),null,null)),(t()(),r.Hb(-1,null,["Upload"]))],null,null)}function yt(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,10,"div",[["class","details"]],null,null,null,null,null)),(t()(),r.qb(1,0,null,null,4,"div",[["class","content"]],null,null,null,null,null)),(t()(),r.qb(2,0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),r.Hb(-1,null,["User Name"])),(t()(),r.qb(4,0,null,null,1,"h5",[],null,null,null,null,null)),(t()(),r.Hb(5,null,["",""])),(t()(),r.qb(6,0,null,null,4,"div",[["class","content"]],null,null,null,null,null)),(t()(),r.qb(7,0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),r.Hb(-1,null,["Email"])),(t()(),r.qb(9,0,null,null,1,"h5",[],null,null,null,null,null)),(t()(),r.Hb(10,null,["",""]))],null,(function(t,e){var n=e.component;t(e,5,0,n.user.username),t(e,10,0,n.user.email)}))}function wt(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,16,"div",[["class","profilecontent"]],null,null,null,null,null)),(t()(),r.fb(16777216,null,null,1,null,gt)),r.pb(2,16384,null,0,u.j,[r.N,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.qb(3,0,null,null,0,"img",[["alt",""],["class","back-btn"],["src","../../../assets/images/cross.png"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.close()&&r),r}),null,null)),(t()(),r.fb(16777216,null,null,1,null,mt)),r.pb(5,16384,null,0,u.j,[r.N,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.fb(16777216,null,null,1,null,bt)),r.pb(7,16384,null,0,u.j,[r.N,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.qb(8,0,null,null,6,"div",[["class","imguploader"]],null,null,null,null,null)),(t()(),r.qb(9,0,null,null,0,"img",[],[[8,"src",4]],[[null,"click"]],(function(t,e,n){var i=!0;return"click"===e&&(i=!1!==r.Bb(t,10).click()&&i),i}),null,null)),(t()(),r.qb(10,0,[["fileuploder",1]],null,0,"input",[["hidden",""],["type","file"]],null,[[null,"change"]],(function(t,e,n){var r=!0;return"change"===e&&(r=!1!==t.component.fileChangeEvent(n)&&r),r}),null,null)),(t()(),r.fb(16777216,null,null,1,null,vt)),r.pb(12,16384,null,0,u.j,[r.N,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.fb(16777216,null,null,1,null,_t)),r.pb(14,16384,null,0,u.j,[r.N,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.fb(16777216,null,null,1,null,yt)),r.pb(16,16384,null,0,u.j,[r.N,r.J],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.showUploading),t(e,5,0,n.globalUser),t(e,7,0,!n.globalUser),t(e,12,0,n.imgSelected),t(e,14,0,n.globalUser&&n.imgSelected),t(e,16,0,!n.imgSelected)}),(function(t,e){t(e,9,0,e.component.croppedImage)}))}function xt(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,1,"app-profile",[],null,null,null,wt,dt)),r.pb(1,114688,null,0,b,[v.a,pt,ft.a],null,null)],(function(t,e){t(e,1,0)}),null)}var Ct=r.mb("app-profile",b,xt,{},{},[]),At=n("xdPU"),St=n("wfUc"),Ot=n("z5bb"),Mt=n("iInd");class Pt{constructor(t,e,n,r){this._route=t,this._socket=e,this._userService=n,this._chatService=r,this.tabs=[!0,!1,!1],this.showMenu=!1,this.showProfileDialog=!1,this.showChatroom=!0}ngOnInit(){this.user=this._userService.getUser(),window.innerWidth<576&&(this.showChatroom=!1),this._userService.showDialog.subscribe(t=>{this.showProfileDialog=t})}openProfileDailog(){this._userService.setProfileUser(this.user),this.showProfileDialog=!0}logOut(){this._userService.setUser(null),this._chatService.setChatUser({_id:"",username:"",email:"",password:"",profilePicUrl:"",friends:null,requests:null}),this._socket.disconnect(this.user._id),this._route.navigate(["/"])}}var kt=r.ob({encapsulation:0,styles:[[".container-fluid[_ngcontent-%COMP%]{height:100vh;width:100%;padding:0;margin:0}.row[_ngcontent-%COMP%]{padding:0;margin:0;height:100vh}.col[_ngcontent-%COMP%]{padding:0;height:100vh;color:#fff}.navtabs[_ngcontent-%COMP%]{height:4rem;padding-top:.5rem;width:100%;color:#fff;background-color:#4e586e;display:flex;align-items:center;justify-content:space-evenly}.navtabs[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]{height:100%;width:100%;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-direction:column;border-bottom:2px solid #4e586e}.navtabs[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]:focus{outline:0}.navtabs[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.7rem;margin:.2rem 0 0}.navtabs[_ngcontent-%COMP%]   .tabs.isActive[_ngcontent-%COMP%]{border-bottom:2px solid #fff}.navtabs[_ngcontent-%COMP%]   .tabs[_ngcontent-%COMP%]   .img-logo[_ngcontent-%COMP%]{height:1.2rem}.navtabs[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:.5rem 1rem;cursor:pointer}.menu[_ngcontent-%COMP%]{height:100%;position:relative;display:flex;align-items:center}.menu[_ngcontent-%COMP%]:hover{cursor:pointer}.dropdown-btn[_ngcontent-%COMP%]{height:1.8rem;padding:0 1rem}.menu-list[_ngcontent-%COMP%]{position:absolute;top:100%;right:1rem;padding:1rem 0;color:#242a38;background-color:#fff;border-radius:5px;box-shadow:0 0 15px rgba(0,0,0,.8);transform:scale(0);transform-origin:right top;-webkit-animation:.3s forwards menu;animation:.3s forwards menu;z-index:10}.menu-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0}.menu-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;padding:.5rem 1.5rem}.menu-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:rgba(0,0,0,.1)}@-webkit-keyframes menu{0%{transform:scale(0)}100%{transform:scale(1)}}@keyframes menu{0%{transform:scale(0)}100%{transform:scale(1)}}.show-area[_ngcontent-%COMP%]{height:calc(100vh - 4rem);width:100%}.profile[_ngcontent-%COMP%]{position:fixed;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:rgba(0,0,0,.7);z-index:90}.contact-chatroom[_ngcontent-%COMP%]{background-color:#242a38}@media screen and (max-width:575px){.contact-chatroom[_ngcontent-%COMP%]{display:none}}"]],data:{}});function Rt(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,2,"div",[["class","profile"]],null,null,null,null,null)),(t()(),r.qb(1,0,null,null,1,"app-profile",[],null,null,null,wt,dt)),r.pb(2,114688,null,0,b,[v.a,pt,ft.a],null,null)],(function(t,e){t(e,2,0)}),null)}function Et(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,5,"div",[["class","menu-list"]],null,null,null,null,null)),(t()(),r.qb(1,0,null,null,4,"ul",[],null,null,null,null,null)),(t()(),r.qb(2,0,null,null,1,"li",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.openProfileDailog()&&r),r}),null,null)),(t()(),r.Hb(-1,null,["Profile"])),(t()(),r.qb(4,0,null,null,1,"li",[],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.logOut()&&r),r}),null,null)),(t()(),r.Hb(-1,null,["Logout"]))],null,null)}function It(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,2,"div",[["class","col contact-chatroom"]],null,null,null,null,null)),(t()(),r.qb(1,0,null,null,1,"app-chatroom",[],null,null,null,At.c,At.b)),r.pb(2,114688,null,0,St.a,[v.a,ft.a,Ot.a],null,null)],(function(t,e){t(e,2,0)}),null)}function Tt(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,41,"div",[["class","container-fluid"]],null,null,null,null,null)),(t()(),r.fb(16777216,null,null,1,null,Rt)),r.pb(2,16384,null,0,u.j,[r.N,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.qb(3,0,null,null,38,"div",[["class","row"]],null,null,null,null,null)),(t()(),r.qb(4,0,null,null,35,"div",[["class","col col-12 col-sm-5 col-md-5 col-lg-4"]],null,null,null,null,null)),(t()(),r.qb(5,0,null,null,31,"div",[["class","navtabs"]],null,null,null,null,null)),(t()(),r.qb(6,0,null,null,8,"div",[["class","tabs"]],null,[[null,"click"]],(function(t,e,n){var i=!0,o=t.component;return"click"===e&&(i=!1!==r.Bb(t,10).onClick()&&i),"click"===e&&(o.tabs[0]=!0,o.tabs[1]=!1,i=0!=(o.tabs[2]=!1)&&i),i}),null,null)),r.Eb(512,null,u.q,u.r,[r.q,r.r,r.k,r.B]),r.pb(8,278528,null,0,u.h,[u.q],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Db(9,{isActive:0}),r.pb(10,16384,null,0,Mt.l,[Mt.k,Mt.a,[8,null],r.B,r.k],{routerLink:[0,"routerLink"]},null),r.Cb(11,1),(t()(),r.qb(12,0,null,null,0,"img",[["alt",""],["class","img-logo"],["src","../../assets/images/friends-logo.png"]],null,null,null,null,null)),(t()(),r.qb(13,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Hb(-1,null,["Friends"])),(t()(),r.qb(15,0,null,null,8,"div",[["class","tabs"]],null,[[null,"click"]],(function(t,e,n){var i=!0,o=t.component;return"click"===e&&(i=!1!==r.Bb(t,19).onClick()&&i),"click"===e&&(o.tabs[0]=!1,o.tabs[1]=!0,i=0!=(o.tabs[2]=!1)&&i),i}),null,null)),r.Eb(512,null,u.q,u.r,[r.q,r.r,r.k,r.B]),r.pb(17,278528,null,0,u.h,[u.q],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Db(18,{isActive:0}),r.pb(19,16384,null,0,Mt.l,[Mt.k,Mt.a,[8,null],r.B,r.k],{routerLink:[0,"routerLink"]},null),r.Cb(20,1),(t()(),r.qb(21,0,null,null,0,"img",[["alt",""],["class","img-logo"],["src","../../assets/images/search-logo.png"]],null,null,null,null,null)),(t()(),r.qb(22,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Hb(-1,null,["Search"])),(t()(),r.qb(24,0,null,null,8,"div",[["class","tabs"]],null,[[null,"click"]],(function(t,e,n){var i=!0,o=t.component;return"click"===e&&(i=!1!==r.Bb(t,28).onClick()&&i),"click"===e&&(o.tabs[0]=!1,o.tabs[1]=!1,i=0!=(o.tabs[2]=!0)&&i),i}),null,null)),r.Eb(512,null,u.q,u.r,[r.q,r.r,r.k,r.B]),r.pb(26,278528,null,0,u.h,[u.q],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),r.Db(27,{isActive:0}),r.pb(28,16384,null,0,Mt.l,[Mt.k,Mt.a,[8,null],r.B,r.k],{routerLink:[0,"routerLink"]},null),r.Cb(29,1),(t()(),r.qb(30,0,null,null,0,"img",[["alt",""],["class","img-logo"],["src","../../assets/images/notification-logo.png"]],null,null,null,null,null)),(t()(),r.qb(31,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Hb(-1,null,["Notification"])),(t()(),r.qb(33,0,null,null,3,"div",[["class","menu"]],null,[[null,"click"]],(function(t,e,n){var r=!0,i=t.component;return"click"===e&&(r=0!=(i.showMenu=!i.showMenu)&&r),r}),null,null)),(t()(),r.qb(34,0,null,null,0,"img",[["alt",""],["class","dropdown-btn"],["src","../../assets/images/dots.png"]],null,null,null,null,null)),(t()(),r.fb(16777216,null,null,1,null,Et)),r.pb(36,16384,null,0,u.j,[r.N,r.J],{ngIf:[0,"ngIf"]},null),(t()(),r.qb(37,0,null,null,2,"div",[["class","show-area"]],null,null,null,null,null)),(t()(),r.qb(38,16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),r.pb(39,212992,null,0,Mt.o,[Mt.b,r.N,r.j,[8,null],r.h],null,null),(t()(),r.fb(16777216,null,null,1,null,It)),r.pb(41,16384,null,0,u.j,[r.N,r.J],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.showProfileDialog);var r=t(e,9,0,n.tabs[0]);t(e,8,0,"tabs",r);var i=t(e,11,0,"/friends");t(e,10,0,i);var o=t(e,18,0,n.tabs[1]);t(e,17,0,"tabs",o);var s=t(e,20,0,"/friends/search");t(e,19,0,s);var a=t(e,27,0,n.tabs[2]);t(e,26,0,"tabs",a);var l=t(e,29,0,"/friends/notification");t(e,28,0,l),t(e,36,0,n.showMenu),t(e,39,0),t(e,41,0,n.showChatroom)}),null)}function zt(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,1,"app-friends",[],null,null,null,Tt,kt)),r.pb(1,114688,null,0,Pt,[Mt.k,Ot.a,v.a,ft.a],null,null)],(function(t,e){t(e,1,0)}),null)}var Ut=r.mb("app-friends",Pt,zt,{},{},[]);class qt{constructor(t,e,n,r){this._route=t,this._userService=e,this._chatService=n,this._socket=r,this.chatuser={_id:"",username:"",password:"",email:"",profilePicUrl:"",friends:null,requests:null}}ngOnInit(){this.user=this._userService.getUser(),this.contacts=this.user.friends,this._socket.confirmNewFriendRequest.subscribe(t=>{this.contacts.find(e=>e._id==t._id)||(this.contacts.unshift(t),this.user.friends=this.contacts,this._userService.setUser(this.user))}),this._socket.chatMessage.subscribe(t=>{t&&this.contacts.forEach(e=>{e._id==t.sender&&(e.new=!0)})})}onClick(t){this.contacts.forEach(e=>{e._id==t._id&&delete e.new}),this.chatuser._id=t._id,this.chatuser.email=t.email,this.chatuser.username=t.username,this.chatuser.profilePicUrl=t.profilePicUrl,this._chatService.chatroomUser.emit(this.chatuser),this._chatService.setChatUser(this.chatuser),window.innerWidth<576&&this._route.navigate(["/chatroom"])}openProfile(t){this._userService.setProfileUser(t),this._userService.showDialog.emit(!0)}}var Bt=r.ob({encapsulation:0,styles:[[".contactList[_ngcontent-%COMP%]{height:100%;overflow:scroll;overflow-x:hidden}.contact-collection[_ngcontent-%COMP%]{padding-top:0;margin:0;border:none}.contact-item[_ngcontent-%COMP%]{padding:.7rem 1rem;margin:0;cursor:pointer;display:flex;align-items:center;border-bottom:1px solid rgba(100,100,100,.5)}.contact-item[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#242a38}.contact-collection[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:2.8rem;height:2.8rem;border-radius:50%;position:relative}.contact-collection[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2.8rem;height:2.8rem;border-radius:50%}.contact-collection[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]::before{content:'';position:absolute;width:100%;height:100%;top:0;left:0;z-index:9}.contactsName[_ngcontent-%COMP%]{font-size:1.1rem;margin:0;color:#fff}.content[_ngcontent-%COMP%]{padding-left:1rem}.new[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:1.2rem;width:1.2rem}[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px transparent;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:10px;-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.8)}"]],data:{}});function Lt(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,1,"div",[["class","new"]],null,null,null,null,null)),(t()(),r.qb(1,0,null,null,0,"img",[["alt",""],["src","../../../assets/images/new-message-1.png"]],null,null,null,null,null))],null,null)}function Nt(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,8,"li",[["class","contact-item"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.onClick(t.context.$implicit)&&r),r}),null,null)),(t()(),r.qb(1,0,null,null,1,"div",[["class","img"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.openProfile(t.context.$implicit)&&r),r}),null,null)),(t()(),r.qb(2,0,null,null,0,"img",[["class","img-fluid"]],[[8,"src",4]],null,null,null,null)),(t()(),r.qb(3,0,null,null,2,"div",[["class","content"]],null,null,null,null,null)),(t()(),r.qb(4,0,null,null,1,"p",[["class","contactsName"]],null,null,null,null,null)),(t()(),r.Hb(5,null,["",""])),(t()(),r.qb(6,0,null,null,0,"div",[["class","m-auto"]],null,null,null,null,null)),(t()(),r.fb(16777216,null,null,1,null,Lt)),r.pb(8,16384,null,0,u.j,[r.N,r.J],{ngIf:[0,"ngIf"]},null)],(function(t,e){t(e,8,0,e.context.$implicit.new)}),(function(t,e){t(e,2,0,r.ub(1,"",e.context.$implicit.profilePicUrl,"")),t(e,5,0,e.context.$implicit.username)}))}function Dt(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,3,"div",[["class","contactList"]],null,null,null,null,null)),(t()(),r.qb(1,0,null,null,2,"ul",[["class","contact-collection"]],null,null,null,null,null)),(t()(),r.fb(16777216,null,null,1,null,Nt)),r.pb(3,278528,null,0,u.i,[r.N,r.J,r.q],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,3,0,e.component.contacts)}),null)}function jt(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,1,"app-friends-list",[],null,null,null,Dt,Bt)),r.pb(1,114688,null,0,qt,[Mt.k,v.a,ft.a,Ot.a],null,null)],(function(t,e){t(e,1,0)}),null)}var Ft=r.mb("app-friends-list",qt,jt,{},{},[]),Wt=n("s7LF");class Ht{constructor(t,e,n){this._userService=t,this._chatService=e,this._socket=n,this.searchText=""}ngOnInit(){this.user=this._userService.getUser()}search(t){t.preventDefault(),this.searchText.length>0?this._userService.searchUsers(this.searchText).subscribe(t=>{this.searchItems=t.filter(t=>{let e=t;return!this.user.friends.find(t=>t._id==e._id)&&t._id!=this.user._id})},t=>{}):this.searchItems=[]}addFriend(t){this._chatService.overlay.emit(!0),this._userService.addFriend({userId:this.user._id},t._id).subscribe(e=>{this._chatService.overlay.emit(!1),this.searchItems=this.searchItems.filter(e=>e._id!=t._id),this._socket.notifyAddFriend(this.user,t)},t=>{this._chatService.overlay.emit(!1)})}showProfile(t){this._userService.setProfileUser(t),this._userService.showDialog.emit(!0)}}var Vt=r.ob({encapsulation:0,styles:[[".searchContent[_ngcontent-%COMP%]{padding:0;margin:0;width:100%;height:100%}.input-div[_ngcontent-%COMP%]{padding:1rem .5rem;height:4rem;width:100%}.searchContent[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.4rem 1rem;margin:0;border-radius:25px;color:#fff;border:none;background-color:#495063}.btn[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus{outline:0}.searchContent[_ngcontent-%COMP%]   .searchList[_ngcontent-%COMP%]{height:calc(100% - 4rem);overflow:scroll;overflow-x:hidden}.searchContent[_ngcontent-%COMP%]   .search-collection[_ngcontent-%COMP%]{margin:0;border:none}.searchContent[_ngcontent-%COMP%]   .search-item[_ngcontent-%COMP%]{padding:.7rem 1rem;margin:0;cursor:pointer;display:flex;align-items:center;border-bottom:1px solid rgba(100,100,100,.5)}.searchContent[_ngcontent-%COMP%]   .search-item[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#242a38}.searchContent[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:2.8rem;height:2.8rem;border-radius:50%;position:relative}.searchContent[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]::before{content:'';position:absolute;width:100%;height:100%;top:0;left:0;z-index:9}.searchContent[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2.8rem;height:2.8rem;border-radius:50%}.searchContent[_ngcontent-%COMP%]   .searchName[_ngcontent-%COMP%]{font-size:1.1rem;padding:.5rem 1rem;margin:0;color:#fff}.searchContent[_ngcontent-%COMP%]   .add-friend-btn[_ngcontent-%COMP%]{padding:.3rem 1rem;font-size:.8rem;color:#fff;background-image:linear-gradient(to right bottom,#f54b64,#f75b61,#f76960,#f77660,#f78361);border-radius:25px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px transparent;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:10px;-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.8)}"]],data:{}});function Qt(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,7,"li",[["class","search-item"]],null,null,null,null,null)),(t()(),r.qb(1,0,null,null,1,"div",[["class","img"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.showProfile(t.context.$implicit)&&r),r}),null,null)),(t()(),r.qb(2,0,null,null,0,"img",[["class","img-fluid"]],[[8,"src",4]],null,null,null,null)),(t()(),r.qb(3,0,null,null,1,"p",[["class","searchName"]],null,null,null,null,null)),(t()(),r.Hb(4,null,["",""])),(t()(),r.qb(5,0,null,null,0,"div",[["class","m-auto"]],null,null,null,null,null)),(t()(),r.qb(6,0,null,null,1,"button",[["class","add-friend-btn btn"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.addFriend(t.context.$implicit)&&r),r}),null,null)),(t()(),r.Hb(-1,null,["Add Friend"]))],null,(function(t,e){t(e,2,0,r.ub(1,"",e.context.$implicit.profilePicUrl,"")),t(e,4,0,e.context.$implicit.username)}))}function Gt(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,11,"div",[["class","searchContent"]],null,null,null,null,null)),(t()(),r.qb(1,0,null,null,6,"div",[["class","input-div"]],null,null,null,null,null)),(t()(),r.qb(2,0,null,null,5,"input",[["id","search"],["name","search"],["placeholder","Search"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keyup"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var i=!0,o=t.component;return"input"===e&&(i=!1!==r.Bb(t,3)._handleInput(n.target.value)&&i),"blur"===e&&(i=!1!==r.Bb(t,3).onTouched()&&i),"compositionstart"===e&&(i=!1!==r.Bb(t,3)._compositionStart()&&i),"compositionend"===e&&(i=!1!==r.Bb(t,3)._compositionEnd(n.target.value)&&i),"ngModelChange"===e&&(i=!1!==(o.searchText=n)&&i),"keyup"===e&&(i=!1!==o.search(n)&&i),i}),null,null)),r.pb(3,16384,null,0,Wt.c,[r.B,r.k,[2,Wt.a]],null,null),r.Eb(1024,null,Wt.l,(function(t){return[t]}),[Wt.c]),r.pb(5,671744,null,0,Wt.p,[[8,null],[8,null],[8,null],[6,Wt.l]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r.Eb(2048,null,Wt.m,null,[Wt.p]),r.pb(7,16384,null,0,Wt.n,[[4,Wt.m]],null,null),(t()(),r.qb(8,0,null,null,3,"div",[["class","searchList"]],null,null,null,null,null)),(t()(),r.qb(9,0,null,null,2,"ul",[["class","search-collection"]],null,null,null,null,null)),(t()(),r.fb(16777216,null,null,1,null,Qt)),r.pb(11,278528,null,0,u.i,[r.N,r.J,r.q],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){var n=e.component;t(e,5,0,"search",n.searchText),t(e,11,0,n.searchItems)}),(function(t,e){t(e,2,0,r.Bb(e,7).ngClassUntouched,r.Bb(e,7).ngClassTouched,r.Bb(e,7).ngClassPristine,r.Bb(e,7).ngClassDirty,r.Bb(e,7).ngClassValid,r.Bb(e,7).ngClassInvalid,r.Bb(e,7).ngClassPending)}))}function Xt(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,1,"app-search",[],null,null,null,Gt,Vt)),r.pb(1,114688,null,0,Ht,[v.a,ft.a,Ot.a],null,null)],(function(t,e){t(e,1,0)}),null)}var Yt=r.mb("app-search",Ht,Xt,{},{},[]);class Jt{constructor(t,e,n){this._userService=t,this._chatService=e,this._socket=n}ngOnInit(){this.user=this._userService.getUser(),this.requests=this.user.requests,this._socket.newFriendRequest.subscribe(t=>{this.requests.find(e=>e._id==t._id)||(this.requests.unshift(t),this.user.requests=this.requests,this._userService.setUser(this.user))})}confirmRequest(t){this._chatService.overlay.emit(!0),this._userService.confirmRequest(this.user._id,{friendId:t._id}).subscribe(e=>{this._chatService.overlay.emit(!1),this.requests=this.requests.filter(e=>e._id!=t._id),this.user.requests=this.requests,this.user.friends.unshift(t),this._userService.setUser(this.user),this._socket.confirmFriendRequest(this.user,t),console.log("send socket")},t=>{this._chatService.overlay.emit(!1)})}deleteRequest(t){this._chatService.overlay.emit(!0),this._userService.deleteRequest(this.user._id,{friendId:t._id}).subscribe(e=>{this._chatService.overlay.emit(!1),this.requests=this.requests.filter(e=>e._id!=t._id),this.user.requests=this.requests,this._userService.setUser(this.user)},t=>{this._chatService.overlay.emit(!1)})}showProfile(t){this._userService.setProfileUser(t),this._userService.showDialog.emit(!0)}}var Kt=r.ob({encapsulation:0,styles:[[".notificationList[_ngcontent-%COMP%]{height:100%;width:100%;overflow:scroll;overflow-x:hidden}.notification-collection[_ngcontent-%COMP%]{padding:0;margin:0;border:none}.notification-item[_ngcontent-%COMP%]{padding:.7rem 1rem;margin:0;cursor:pointer;display:flex;align-items:center;border-bottom:1px solid rgba(100,100,100,.5)}.notification-item[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#242a38}.notification-item[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{width:2.8rem;height:2.8rem;border-radius:50%;position:relative}.notification-item[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]::before{content:'';position:absolute;width:100%;height:100%;top:0;left:0;z-index:9}.notification-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:2.8rem;height:2.8rem;border-radius:50%;z-index:-1}.notification-item[_ngcontent-%COMP%]   .notificationName[_ngcontent-%COMP%]{font-size:1.1rem;padding:.5rem 1rem;margin:0;color:#fff}.notification-item[_ngcontent-%COMP%]   .requests-btn[_ngcontent-%COMP%]{margin-right:1rem;padding:.3rem 1rem;color:#fff;background-image:linear-gradient(to right bottom,#f54b64,#f75b61,#f76960,#f77660,#f78361);border-radius:8px}.requests-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:1.2rem;width:1.2rem}[_ngcontent-%COMP%]::-webkit-scrollbar{width:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{-webkit-box-shadow:inset 0 0 6px transparent;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:10px;-webkit-box-shadow:inset 0 0 6px rgba(0,0,0,.8)}"]],data:{}});function $t(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,9,"li",[["class","notification-item"]],null,null,null,null,null)),(t()(),r.qb(1,0,null,null,1,"div",[["class","img"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.showProfile(t.context.$implicit)&&r),r}),null,null)),(t()(),r.qb(2,0,null,null,0,"img",[["class","img-fluid"]],[[8,"src",4]],null,null,null,null)),(t()(),r.qb(3,0,null,null,1,"p",[["class","notificationName"]],null,null,null,null,null)),(t()(),r.Hb(4,null,["",""])),(t()(),r.qb(5,0,null,null,0,"div",[["class","m-auto"]],null,null,null,null,null)),(t()(),r.qb(6,0,null,null,1,"button",[["class","requests-btn btn"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.confirmRequest(t.context.$implicit)&&r),r}),null,null)),(t()(),r.qb(7,0,null,null,0,"img",[["alt",""],["src","../../../assets/images/accept.png"]],null,null,null,null,null)),(t()(),r.qb(8,0,null,null,1,"button",[["class","requests-btn btn"]],null,[[null,"click"]],(function(t,e,n){var r=!0;return"click"===e&&(r=!1!==t.component.deleteRequest(t.context.$implicit)&&r),r}),null,null)),(t()(),r.qb(9,0,null,null,0,"img",[["alt",""],["src","../../../assets/images/delete.png"]],null,null,null,null,null))],null,(function(t,e){t(e,2,0,r.ub(1,"",e.context.$implicit.profilePicUrl,"")),t(e,4,0,e.context.$implicit.username)}))}function Zt(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,3,"div",[["class","notificationList"]],null,null,null,null,null)),(t()(),r.qb(1,0,null,null,2,"ul",[["class","notification-collection"]],null,null,null,null,null)),(t()(),r.fb(16777216,null,null,1,null,$t)),r.pb(3,278528,null,0,u.i,[r.N,r.J,r.q],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,3,0,e.component.requests)}),null)}function te(t){return r.Ib(0,[(t()(),r.qb(0,0,null,null,1,"app-notification",[],null,null,null,Zt,Kt)),r.pb(1,114688,null,0,Jt,[v.a,ft.a,Ot.a],null,null)],(function(t,e){t(e,1,0)}),null)}var ee=r.mb("app-notification",Jt,te,{},{},[]),ne=n("wj3C"),re=n.n(ne),ie=n("mrSG"),oe=n("S+S0"),se=function(){function t(t,e){this.code_=ae(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}return t.prototype.codeProp=function(){return this.code},t.prototype.codeEquals=function(t){return ae(t)===this.codeProp()},t.prototype.serverResponseProp=function(){return this.serverResponse_},t.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(t.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),t}();function ae(t){return"storage/"+t}function le(){return new se("unknown","An unknown error occurred, please check the error payload for server response.")}function ue(){return new se("canceled","User canceled the upload/download.")}function ce(){return new se("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function he(){return new se("no-download-url","The given file does not have any download URLs.")}function pe(t,e,n){return new se("invalid-argument","Invalid argument in `"+e+"` at index "+t+": "+n)}function fe(){return new se("app-deleted","The Firebase app was deleted.")}function de(t,e){return new se("invalid-format","String does not match format '"+t+"': "+e)}function ge(t){throw new se("internal-error","Internal error: "+t)}var me={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function be(t){switch(t){case me.RAW:case me.BASE64:case me.BASE64URL:case me.DATA_URL:return;default:throw"Expected one of the event types: ["+me.RAW+", "+me.BASE64+", "+me.BASE64URL+", "+me.DATA_URL+"]."}}var ve=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function _e(t,e){switch(t){case me.RAW:return new ve(ye(e));case me.BASE64:case me.BASE64URL:return new ve(we(t,e));case me.DATA_URL:return new ve((n=new xe(e)).base64?we(me.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(n){throw de(me.DATA_URL,"Malformed data URL.")}return ye(e)}(n.rest),function(t){return new xe(t).contentType}(e))}var n;throw le()}function ye(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function we(t,e){switch(t){case me.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw de(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case me.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw de(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(u){throw de(t,"Invalid character found")}for(var a=new Uint8Array(s.length),l=0;l<s.length;l++)a[l]=s.charCodeAt(l);return a}var xe=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw de(me.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=r).length>=";base64".length&&";base64"===n.substring(n.length-";base64".length),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}}(),Ce={STATE_CHANGED:"state_changed"},Ae={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Se(t){switch(t){case"running":case"pausing":case"canceling":return Ae.RUNNING;case"paused":return Ae.PAUSED;case"success":return Ae.SUCCESS;case"canceled":return Ae.CANCELED;case"error":default:return Ae.ERROR}}function Oe(t){return null!=t}function Me(t){return void 0!==t}function Pe(t){return"function"==typeof t}function ke(t){return"object"==typeof t}function Re(t){return ke(t)&&null!==t}function Ee(t){return"string"==typeof t||t instanceof String}function Ie(t){return Te(t)&&Number.isInteger(t)}function Te(t){return"number"==typeof t||t instanceof Number}function ze(t){return Ue()&&t instanceof Blob}function Ue(){return"undefined"!=typeof Blob}var qe=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),Be=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=qe.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=qe.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=qe.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw ge("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),Oe(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return Oe(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw ge("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw ge("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw ge("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){Oe(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){Oe(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Le=function(){function t(){}return t.prototype.createXhrIo=function(){return new Be},t}();function Ne(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function De(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Ne();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Ue())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var je=function(){function t(t,e){var n=0,r="";ze(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(ze(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Ue()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(De.apply(null,r))}var i=e.map((function(t){return Ee(t)?_e(me.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),Fe=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(r){return new t(e,"")}if(""===n.path)return n;throw new se("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o="firebasestorage.googleapis.com".replace(/[.]/g,"\\."),s=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],a=0;a<s.length;a++){var l=s[a],u=l.regex.exec(e);if(u){var c=u[l.indices.path];c||(c=""),n=new t(u[l.indices.bucket],c),l.postModify(n);break}}if(null==n)throw function(t){return new se("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function We(t){var e,n;try{e=JSON.parse(t)}catch(r){return null}return ke(n=e)&&!Array.isArray(n)?e:null}function He(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}function Ve(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Qe(t){return"https://firebasestorage.googleapis.com/v0"+t}function Ge(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function Xe(t,e){return e}var Ye=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Xe}}(),Je=null;function Ke(t,e,n){var r=We(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new Fe(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,r,n)}function $e(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function Ze(t){if(!ke(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!ke(n))throw"Expected object for 'customMetadata' mapping."}else if(Re(n))throw"Mapping for '"+e+"' cannot be an object."}}function tn(t){if(!ke(t)||!t)throw"Expected ListOptions object.";for(var e in t)if("maxResults"===e){if(!Ie(t.maxResults)||t.maxResults<=0)throw"Expected maxResults to be a positive number.";if(t.maxResults>1e3)throw"Expected maxResults to be less than or equal to 1000."}else{if("pageToken"!==e)throw"Unknown option: "+e;if(t.pageToken&&!Ee(t.pageToken))throw"Expected pageToken to be string."}}var en=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function nn(t){if(!t)throw le()}function rn(t,e){return function(n,r){var i=Ke(t,r,e);return nn(null!==i),i}}function on(t){return function(e,n){var r;return(r=401===e.getStatus()?new se("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new se("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new se("unauthorized","User does not have permission to access '"+t.path+"'."):n).setServerResponseProp(n.serverResponseProp()),r}}function sn(t){var e=on(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new se("object-not-found","Object '"+t.path+"' does not exist.")),i.setServerResponseProp(r.serverResponseProp()),i}}function an(t,e,n){var r=Qe(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new en(r,"GET",rn(t,n),i);return o.errorHandler=sn(e),o}function ln(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=Qe(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime(),l=new en(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=We(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new Fe(e,s));r.prefixes.push(a)}if(n.items)for(var l=0,u=n.items;l<u.length;l++)a=t.makeStorageReference(new Fe(e,u[l].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return nn(null!==i),i}}(t,e.bucket),a);return l.urlParams=o,l.errorHandler=on(e),l}function un(t,e,n){var r=Qe(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new en(r,"GET",function(t,e){return function(n,r){var i=Ke(t,r,e);return nn(null!==i),function(t,e){var n=We(e);if(null===n)return null;if(!Ee(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.fullPath;return Qe("/b/"+i(t.bucket)+"/o/"+i(n))+Ge({alt:"media",token:e})}))[0]}(i,r)}}(t,n),i);return o.errorHandler=sn(e),o}function cn(t,e,n,r){var i=Qe(e.fullServerUrl()),o=$e(n,r),s=t.maxOperationRetryTime(),a=new en(i,"PATCH",rn(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=sn(e),a}function hn(t,e){var n=Qe(e.fullServerUrl()),r=t.maxOperationRetryTime(),i=new en(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=sn(e),i}function pn(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var fn=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function dn(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(r){nn(!1)}return nn(!!n&&-1!==(e||["active"]).indexOf(n)),n}var gn=function(){return function(t,e,n){if(Pe(t)||Oe(e)||Oe(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}}}(),mn=function(){return function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}}();function bn(t,e,n){for(var r=e.length,i=e.length,o=0;o<e.length;o++)if(e[o].optional){r=o;break}var s,a,l,u;if(!(r<=n.length&&n.length<=i))throw(s=r)===(a=i)?(l=s,u=1===s?"argument":"arguments"):(l="between "+s+" and "+a,u="arguments"),new se("invalid-argument-count","Invalid argument count in `"+t+"`: Expected "+l+" "+u+", received "+n.length+".");for(o=0;o<n.length;o++)try{e[o].validator(n[o])}catch(c){throw c instanceof Error?pe(o,t,c.message):pe(o,t,c)}}var vn=function(){return function(t,e){var n=this;this.validator=function(e){n.optional&&!Me(e)||t(e)},this.optional=!!e}}();function _n(t,e){function n(t){if(!Ee(t))throw"Expected string."}var r,i,o;return t?(i=n,o=t,r=function(t){i(t),o(t)}):r=n,new vn(r,e)}function yn(){return new vn((function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||Ue()&&t instanceof Blob))throw"Expected Blob or File."}))}function wn(t){return new vn(Ze,t)}function xn(t){return new vn(tn,t)}function Cn(){return new vn((function(t){if(!(Te(t)&&t>=0))throw"Expected a number 0 or greater."}))}function An(t,e){return new vn((function(e){if(!(null===e||Oe(e)&&e instanceof Object))throw"Expected an Object.";null!=t&&t(e)}),e)}function Sn(t){return new vn((function(t){if(null!==t&&!Pe(t))throw"Expected a Function."}),t)}function On(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var Mn=function(){function t(t,e,n,r,i,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_="running",this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals("canceled")?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_("error"))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals("canceled")?s.completeTransitions_():(s.error_=t,s.transition_("error"))},this.promise_=new Promise((function(t,e){s.resolve_=t,s.reject_=e,s.start_()})),this.promise_.then(null,(function(){}))}return t.prototype.makeProgressCallback_=function(){var t=this,e=this.transferred_;return function(n){return t.updateProgress_(e+n)}},t.prototype.shouldDoResumable_=function(t){return t.size()>262144},t.prototype.start_=function(){"running"===this.state_&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},t.prototype.resolveToken_=function(t){var e=this;this.authWrapper_.getAuthToken().then((function(n){switch(e.state_){case"running":t(n);break;case"canceling":e.transition_("canceled");break;case"pausing":e.transition_("paused")}}))},t.prototype.createResumable_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=pn(e,r,i),a={name:s.fullPath},l=Qe(o),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},c=$e(s,n),h=t.maxUploadRetryTime(),p=new en(l,"POST",(function(t){var e;dn(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){nn(!1)}return nn(Ee(e)),e}),h);return p.urlParams=a,p.headers=u,p.body=c,p.errorHandler=on(e),p}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.uploadUrl_=e,t.needToFetchStatus_=!1,t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.fetchStatus_=function(){var t=this,e=this.uploadUrl_;this.resolveToken_((function(n){var r=function(t,e,n,r){var i=t.maxUploadRetryTime(),o=new en(n,"POST",(function(t){var e=dn(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){nn(!1)}n||nn(!1);var i=Number(n);return nn(!isNaN(i)),new fn(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=on(e),o}(t.authWrapper_,t.location_,e,t.blob_),i=t.authWrapper_.makeRequest(r,n);t.request_=i,i.getPromise().then((function(e){e=e,t.request_=null,t.updateProgress_(e.current),t.needToFetchStatus_=!1,e.finalized&&(t.needToFetchMetadata_=!0),t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.continueUpload_=function(){var t=this,e=262144*this.chunkMultiplier_,n=new fn(this.transferred_,this.blob_.size()),r=this.uploadUrl_;this.resolveToken_((function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var l=new fn(0,0);if(s?(l.current=s.current,l.total=s.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new se("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var u=l.total-l.current,c=u;i>0&&(c=Math.min(c,i));var h=l.current,p={"X-Goog-Upload-Command":c===u?"upload, finalize":"upload","X-Goog-Upload-Offset":l.current},f=r.slice(h,h+c);if(null===f)throw ce();var d=e.maxUploadRetryTime(),g=new en(n,"POST",(function(t,n){var i,s=dn(t,["active","final"]),a=l.current+c,u=r.size();return i="final"===s?rn(e,o)(t,n):null,new fn(a,u,"final"===s,i)}),d);return g.headers=p,g.body=f.uploadData(),g.progressCallback=a||null,g.errorHandler=on(t),g}(t.location_,t.authWrapper_,r,t.blob_,e,t.mappings_,n,t.makeProgressCallback_())}catch(a){return t.error_=a,void t.transition_("error")}var s=t.authWrapper_.makeRequest(o,i);t.request_=s,s.getPromise().then((function(e){t.increaseMultiplier_(),t.request_=null,t.updateProgress_(e.current),e.finalized?(t.metadata_=e.metadata,t.transition_("success")):t.completeTransitions_()}),t.errorHandler_)}))},t.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},t.prototype.fetchMetadata_=function(){var t=this;this.resolveToken_((function(e){var n=an(t.authWrapper_,t.location_,t.mappings_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.transition_("success")}),t.metadataErrorHandler_)}))},t.prototype.oneShotUpload_=function(){var t=this;this.resolveToken_((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var l=pn(e,r,i),u=$e(l,n),c=je.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+u+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===c)throw ce();var h={name:l.fullPath},p=Qe(o),f=t.maxUploadRetryTime(),d=new en(p,"POST",rn(t,n),f);return d.urlParams=h,d.headers=s,d.body=c.uploadData(),d.errorHandler=on(e),d}(t.authWrapper_,t.location_,t.mappings_,t.blob_,t.metadata_),r=t.authWrapper_.makeRequest(n,e);t.request_=r,r.getPromise().then((function(e){t.request_=null,t.metadata_=e,t.updateProgress_(t.blob_.size()),t.transition_("success")}),t.errorHandler_)}))},t.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},t.prototype.transition_=function(t){if(this.state_!==t)switch(t){case"canceling":case"pausing":this.state_=t,null!==this.request_&&this.request_.cancel();break;case"running":var e="paused"===this.state_;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case"paused":this.state_=t,this.notifyObservers_();break;case"canceled":this.error_=ue(),this.state_=t,this.notifyObservers_();break;case"error":case"success":this.state_=t,this.notifyObservers_()}},t.prototype.completeTransitions_=function(){switch(this.state_){case"pausing":this.transition_("paused");break;case"canceling":this.transition_("canceled");break;case"running":this.start_()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Se(this.state_);return new mn(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),t.prototype.on=function(t,e,n,r){function i(){if(t!==Ce.STATE_CHANGED)throw"Expected one of the event types: ["+Ce.STATE_CHANGED+"]."}var o="Expected a function or an Object with one of `next`, `error`, `complete` properties.",s=Sn(!0).validator,a=An(null,!0).validator;function l(t){try{return void s(t)}catch(e){}try{if(a(t),!(Me(t.next)||Me(t.error)||Me(t.complete)))throw"";return}catch(e){throw o}}var u=[_n(i),An(l,!0),Sn(!0),Sn(!0)];bn("on",u,arguments);var c=this;function h(t){return function(e,n,i){null!==t&&bn("on",t,arguments);var o=new gn(e,n,r);return c.addObserver_(o),function(){c.removeObserver_(o)}}}function p(t){if(null===t)throw o;l(t)}var f=[An(p),Sn(!0),Sn(!0)],d=!(Me(e)||Me(n)||Me(r));return d?h(f):h(null)(e,n,r)},t.prototype.then=function(t,e){return this.promise_.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},t.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},t.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),this.observers_.slice().forEach((function(e){t.notifyObserver_(e)}))},t.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(Se(this.state_)){case Ae.SUCCESS:On(this.resolve_.bind(null,this.snapshot))();break;case Ae.CANCELED:case Ae.ERROR:On(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},t.prototype.notifyObserver_=function(t){switch(Se(this.state_)){case Ae.RUNNING:case Ae.PAUSED:t.next&&On(t.next.bind(t,this.snapshot))();break;case Ae.SUCCESS:t.complete&&On(t.complete.bind(t))();break;case Ae.CANCELED:case Ae.ERROR:t.error&&On(t.error.bind(t,this.error_))();break;default:t.error&&On(t.error.bind(t,this.error_))()}},t.prototype.resume=function(){bn("resume",[],arguments);var t="paused"===this.state_||"pausing"===this.state_;return t&&this.transition_("running"),t},t.prototype.pause=function(){bn("pause",[],arguments);var t="running"===this.state_;return t&&this.transition_("pausing"),t},t.prototype.cancel=function(){bn("cancel",[],arguments);var t="running"===this.state_||"pausing"===this.state_;return t&&this.transition_("canceling"),t},t}(),Pn=function(){function t(t,e){this.authWrapper=t,this.location=e instanceof Fe?e:Fe.makeFromUrl(e)}return t.prototype.toString=function(){return bn("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},t.prototype.newRef=function(e,n){return new t(e,n)},t.prototype.mappings=function(){return function(){if(Je)return Je;var t=[];t.push(new Ye("bucket")),t.push(new Ye("generation")),t.push(new Ye("metageneration")),t.push(new Ye("name","fullPath",!0));var e=new Ye("name");e.xform=function(t,e){return function(t){return!Ee(t)||t.length<2?t:Ve(t)}(e)},t.push(e);var n=new Ye("size");return n.xform=function(t,e){return Oe(e)?Number(e):e},t.push(n),t.push(new Ye("timeCreated")),t.push(new Ye("updated")),t.push(new Ye("md5Hash",null,!0)),t.push(new Ye("cacheControl",null,!0)),t.push(new Ye("contentDisposition",null,!0)),t.push(new Ye("contentEncoding",null,!0)),t.push(new Ye("contentLanguage",null,!0)),t.push(new Ye("contentType",null,!0)),t.push(new Ye("metadata","customMetadata",!0)),Je=t}()},t.prototype.child=function(t){bn("child",[_n()],arguments);var e=He(this.location.path,t),n=new Fe(this.location.bucket,e);return this.newRef(this.authWrapper,n)},Object.defineProperty(t.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new Fe(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var t=new Fe(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Ve(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),t.prototype.put=function(t,e){return void 0===e&&(e=null),bn("put",[yn(),wn(!0)],arguments),this.throwIfRoot_("put"),new Mn(this,this.authWrapper,this.location,this.mappings(),new je(t),e)},t.prototype.putString=function(t,e,n){void 0===e&&(e=me.RAW),bn("putString",[_n(),_n(be,!0),wn(!0)],arguments),this.throwIfRoot_("putString");var r=_e(e,t),i=Object.assign({},n);return!Oe(i.contentType)&&Oe(r.contentType)&&(i.contentType=r.contentType),new Mn(this,this.authWrapper,this.location,this.mappings(),new je(r.data,!0),i)},t.prototype.delete=function(){var t=this;return bn("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then((function(e){var n=hn(t.authWrapper,t.location);return t.authWrapper.makeRequest(n,e).getPromise()}))},t.prototype.listAll=function(){bn("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then((function(){return t}))},t.prototype.listAllHelper=function(t,e){return Object(ie.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(ie.__generator)(this,(function(o){switch(o.label){case 0:return[4,this.list({pageToken:e})];case 1:return n=o.sent(),(r=t.prefixes).push.apply(r,n.prefixes),(i=t.items).push.apply(i,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(t,n.nextPageToken)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))},t.prototype.list=function(t){bn("list",[xn(!0)],arguments);var e=this;return this.authWrapper.getAuthToken().then((function(n){var r=t||{},i=ln(e.authWrapper,e.location,"/",r.pageToken,r.maxResults);return e.authWrapper.makeRequest(i,n).getPromise()}))},t.prototype.getMetadata=function(){var t=this;return bn("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then((function(e){var n=an(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise()}))},t.prototype.updateMetadata=function(t){var e=this;return bn("updateMetadata",[wn()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then((function(n){var r=cn(e.authWrapper,e.location,t,e.mappings());return e.authWrapper.makeRequest(r,n).getPromise()}))},t.prototype.getDownloadURL=function(){var t=this;return bn("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then((function(e){var n=un(t.authWrapper,t.location,t.mappings());return t.authWrapper.makeRequest(n,e).getPromise().then((function(t){if(null===t)throw he();return t}))}))},t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw function(t){return new se("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(t)},t}(),kn=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),Rn=function(){function t(){this.map=new Map,this.id=-9007199254740991}return t.prototype.addRequest=function(t){var e=this,n=this.id;this.id++,this.map.set(n,t),t.getPromise().then((function(){return e.map.delete(n)}),(function(){return e.map.delete(n)}))},t.prototype.clear=function(){this.map.forEach((function(t){t&&t.cancel(!0)})),this.map.clear()},t}(),En=function(){function t(e,n,r,i,o,s){var a;if(this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=e,null!==this.app_){var l=this.app_.options;Oe(l)&&(this.bucket_=t.extractBucket_(l),this.appId_=null!==(a=l.appId)&&void 0!==a?a:null)}this.authProvider_=n,this.storageRefMaker_=r,this.requestMaker_=i,this.pool_=s,this.service_=o,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requestMap_=new Rn}return t.extractBucket_=function(t){var e=t.storageBucket||null;return null==e?null:Fe.makeFromBucketSpec(e).bucket},t.prototype.getAuthToken=function(){var t=this.authProvider_.getImmediate({optional:!0});return t?t.getToken().then((function(t){return null!==t?t.accessToken:null}),(function(){return null})):Promise.resolve(null)},t.prototype.bucket=function(){if(this.deleted_)throw fe();return this.bucket_},t.prototype.service=function(){return this.service_},t.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},t.prototype.makeRequest=function(t,e){if(this.deleted_)return new kn(fe());var n=this.requestMaker_(t,this.appId_,e,this.pool_);return this.requestMap_.addRequest(n),n},t.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},t.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},t.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},t.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},t.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},t}(),In=function(){function t(t,e,n,r,i,o,s,a,l,u,c){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=u,this.timeout_=l,this.pool_=c,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());Me(a)?i(a):i()}catch(l){o(l)}else null!==s?((r=le()).setServerResponseProp(s.getResponseText()),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?fe():ue():new se("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Tn(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function l(){return 2===a}var u=!1;function c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];u||(u=!0,n.apply(null,t))}function h(e){o=setTimeout((function(){o=null,function(e,n){if(n)e(!1,new Tn(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===qe.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Tn(s,n))}else{var a=n.getErrorCode()===qe.ABORT;e(!1,new Tn(!1,null,a))}}))}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(p,l())}),e)}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,Object(ie.__spreadArrays)([null,t],e));else{var r,o=l()||s;o?c.call.apply(c,Object(ie.__spreadArrays)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var f=!1;function d(t){f||(f=!0,u||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout((function(){s=!0,d(!0)}),r),d}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Tn=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function zn(t,e,n,r){var i=Ge(t.urlParams),o=t.url+i,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==re.a?re.a.SDK_VERSION:"AppManager")}(s),new In(o,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}var Un,qn,Bn=function(){function t(t,e,n,r){if(this.bucket_=null,this.authWrapper_=new En(t,e,(function(t,e){return new Pn(t,e)}),zn,this,n),this.app_=t,null!=r)this.bucket_=Fe.makeFromBucketSpec(r);else{var i=this.authWrapper_.bucket();null!=i&&(this.bucket_=new Fe(i,""))}this.internals_=new Ln(this)}return t.prototype.ref=function(t){function e(t){if("string"!=typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."}if(bn("ref",[_n(e,!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var n=new Pn(this.authWrapper_,this.bucket_);return null!=t?n.child(t):n},t.prototype.refFromURL=function(t){function e(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{Fe.makeFromUrl(t)}catch(e){throw"Expected valid full URL but got an invalid one."}}return bn("refFromURL",[_n(e,!1)],arguments),new Pn(this.authWrapper_,t)},Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),t.prototype.setMaxUploadRetryTime=function(t){bn("setMaxUploadRetryTime",[Cn()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},t.prototype.setMaxOperationRetryTime=function(t){bn("setMaxOperationRetryTime",[Cn()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),t}(),Ln=function(){function t(t){this.service_=t}return t.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},t}();qn={TaskState:Ae,TaskEvent:Ce,StringFormat:me,Storage:Bn,Reference:Pn},(Un=re.a).INTERNAL.registerComponent(new oe.Component("storage",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new Bn(n,r,new Le,e)}),"PUBLIC").setServiceProps(qn).setMultipleInstances(!0)),Un.registerVersion("@firebase/storage","0.3.34");let Nn=class{};const Dn={animation:"Friendslist"},jn={animation:"Search"},Fn={animation:"Notification"};class Wn{}var Hn=n("MYbz"),Vn=n("Um7L");n.d(e,"FriendsModuleNgFactory",(function(){return Qn}));var Qn=r.nb(i,[],(function(t){return r.zb([r.Ab(512,r.j,r.Y,[[8,[o.a,Ut,Ft,Yt,ee,At.a,Ct]],[3,r.j],r.v]),r.Ab(4608,u.l,u.k,[r.s,[2,u.t]]),r.Ab(4608,Wt.u,Wt.u,[]),r.Ab(5120,at,ut,[rt,r.x,[2,it]]),r.Ab(4608,pt,pt,[rt,[2,it],[2,ht],r.z,r.x]),r.Ab(1073742336,u.b,u.b,[]),r.Ab(1073742336,Mt.n,Mt.n,[[2,Mt.s],[2,Mt.k]]),r.Ab(1073742336,Wn,Wn,[]),r.Ab(1073742336,Wt.t,Wt.t,[]),r.Ab(1073742336,Wt.i,Wt.i,[]),r.Ab(1073742336,Hn.a,Hn.a,[]),r.Ab(1073742336,Vn.a,Vn.a,[]),r.Ab(1073742336,l,l,[]),r.Ab(1073742336,ct,ct,[r.z]),r.Ab(1073742336,Nn,Nn,[]),r.Ab(1073742336,i,i,[]),r.Ab(1024,Mt.i,(function(){return[[{path:"",component:Pt,children:[{path:"",component:qt,data:Dn},{path:"search",component:Ht,data:jn},{path:"notification",component:Jt,data:Fn}]}],[{path:"",component:St.a}]]}),[]),r.Ab(256,rt,{apiKey:"AIzaSyBeQz5BeR5EY9g6wKYouxPp4OUArdAjPG8",authDomain:"chatapp-9fa60.firebaseapp.com",databaseURL:"https://chatapp-9fa60.firebaseio.com",projectId:"chatapp-9fa60",storageBucket:"chatapp-9fa60.appspot.com",messagingSenderId:"1014475100914",appId:"1:1014475100914:web:e2f8ec434edcf6ea05b66b"},[]),r.Ab(256,it,void 0,[])])}))},"S+S0":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mrSG"),i=n("zVF4"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r.__assign({identifier:"[DEFAULT]",optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(s){if(n)return null;throw s}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService("[DEFAULT]")}catch(c){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=r.__read(o.value,2),a=s[1],l=this.normalizeInstanceIdentifier(s[0]);try{var u=this.getOrInitializeService(l);a.resolve(u)}catch(c){}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}(),a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=o,e.ComponentContainer=a,e.Provider=s},Wcq6:function(t,e,n){"use strict";var r,i=(r=n("wj3C"))&&"object"==typeof r&&"default"in r?r.default:r;i.registerVersion("firebase","7.14.6","app"),t.exports=i},mrSG:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return i})),n.d(e,"__assign",(function(){return o})),n.d(e,"__rest",(function(){return s})),n.d(e,"__decorate",(function(){return a})),n.d(e,"__param",(function(){return l})),n.d(e,"__metadata",(function(){return u})),n.d(e,"__awaiter",(function(){return c})),n.d(e,"__generator",(function(){return h})),n.d(e,"__exportStar",(function(){return p})),n.d(e,"__values",(function(){return f})),n.d(e,"__read",(function(){return d})),n.d(e,"__spread",(function(){return g})),n.d(e,"__spreadArrays",(function(){return m})),n.d(e,"__await",(function(){return b})),n.d(e,"__asyncGenerator",(function(){return v})),n.d(e,"__asyncDelegator",(function(){return _})),n.d(e,"__asyncValues",(function(){return y})),n.d(e,"__makeTemplateObject",(function(){return w})),n.d(e,"__importStar",(function(){return x})),n.d(e,"__importDefault",(function(){return C})),n.d(e,"__classPrivateFieldGet",(function(){return A})),n.d(e,"__classPrivateFieldSet",(function(){return S}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function l(t,e){return function(n,r){e(n,r,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))}function h(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function p(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function f(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function m(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function b(t){return this instanceof b?(this.v=t,this):new b(t)}function v(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||a(t,e)}))})}function a(t,e){try{(n=i[t](e)).value instanceof b?Promise.resolve(n.value.v).then(l,u):c(o[0][2],n)}catch(r){c(o[0][3],r)}var n}function l(t){a("next",t)}function u(t){a("throw",t)}function c(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function _(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:b(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function y(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=f(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){!function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}(r,i,(e=t[n](e)).done,e.value)}))}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function x(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function C(t){return t&&t.__esModule?t:{default:t}}function A(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function S(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.r(e),n.d(e,"LogLevel",(function(){return s})),n.d(e,"Logger",(function(){return h})),n.d(e,"setLogLevel",(function(){return p})),n.d(e,"setUserLogHandler",(function(){return f}));var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},l=s.INFO,u=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),c=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=u[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=l,this._logHandler=c,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function p(t){var e="string"==typeof t?a[t]:t;o.forEach((function(t){t.logLevel=e}))}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},wj3C:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=n("mrSG"),s=n("zVF4"),a=n("S+S0"),l=n("q/0M"),u=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),c=new s.ErrorFactory("app","Firebase",u),h=((i={})["@firebase/app"]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new l.Logger("@firebase/app"),f=function(){function t(t,e,n){var r,i,l=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=s.deepCopy(t),this.container=new a.ComponentContainer(e.name),this._addComponent(new a.Component("app",(function(){return l}),"PUBLIC"));try{for(var u=o.__values(this.firebase_.INTERNAL.components.values()),c=u.next();!c.done;c=u.next())this._addComponent(c.value)}catch(h){r={error:h}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw c.create("app-deleted",{appName:this.name_})},t}();f.prototype.name&&f.prototype.options||f.prototype.delete||console.log("dc");var d=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw c.create("bad-app-name",{appName:String(a)});if(s.contains(e,a))throw c.create("duplicate-app",{appName:a});var l=new t(n,o,r);return e[a]=l,l},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=h[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var l=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&l.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&l.push("and"),s&&l.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(l.join(" "))}u(new a.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:l.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw c.create("invalid-log-argument",{appName:name});l.setUserLogHandler(t,e)},apps:null,SDK_VERSION:"7.14.5",INTERNAL:{registerComponent:u,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!s.contains(e,t=t||"[DEFAULT]"))throw c.create("no-app",{appName:t});return e[t]}function u(a){var l,u,h=a.name;if(n.has(h))return p.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===a.type?r[h]:null;if(n.set(h,a),"PUBLIC"===a.type){var f=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw c.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==a.serviceProps&&s.deepExtend(f,a.serviceProps),r[h]=f,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,h);return n.apply(this,a.multipleInstances?t:[])}}try{for(var d=o.__values(Object.keys(e)),g=d.next();!g.done;g=d.next())e[g.value]._addComponent(a)}catch(m){l={error:m}}finally{try{g&&!g.done&&(u=d.return)&&u.call(d)}finally{if(l)throw l.error}}return"PUBLIC"===a.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(f);return e.INTERNAL=o.__assign(o.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){s.deepExtend(e,t)},createSubscribe:s.createSubscribe,ErrorFactory:s.ErrorFactory,deepExtend:s.deepExtend}),e}(),g=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(s.isBrowser()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var m=self.firebase.SDK_VERSION;m&&m.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=d.initializeApp;d.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return s.isNode()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),b.apply(void 0,t)};var v=d;!function(t,e){t.INTERNAL.registerComponent(new a.Component("platform-logger",(function(t){return new g(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.4",void 0),t.registerVersion("fire-js","")}(v),e.default=v,e.firebase=v},zVF4:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("mrSG"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,c=(15&a)<<2|u>>6,h=63&u;l||(h=64,s||(c=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[c],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,l=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==l)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==l&&r.push(a<<6&192|l))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){try{return l.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function c(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=c(t[n],e[n]));return t}var h=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var f=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,d.prototype.create),i}return r.__extends(e,t),e}(Error),d=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?g(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",l=new f(i,a),u=0,c=Object.keys(r);u<c.length;u++){var h=c[u];"_"!==h.slice(-1)&&(h in l&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),l[h]=r[h])}return l},t}();function g(t,e){return t.replace(m,(function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"}))}var m=/\{\$([^}]+)}/g;function b(t){return JSON.parse(t)}var v=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=b(u(o[0])||""),n=b(u(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},_=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],l=this.chain_[2],u=this.chain_[3],c=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=u^a&(l^u),o=1518500249):(i=a^l^u,o=1859775393):r<60?(i=a&l|u&(a|l),o=2400959708):(i=a^l^u,o=3395469782);var h=(s<<5|s>>>27)+i+c+o+n[r]&4294967295;c=u,u=l,l=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+u&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}(),y=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=w),void 0===r.error&&(r.error=w),void 0===r.complete&&(r.complete=w);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function w(){}function x(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}e.CONSTANTS=i,e.Deferred=h,e.ErrorFactory=d,e.FirebaseError=f,e.Sha1=_,e.assert=o,e.assertionError=s,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=l,e.base64Decode=u,e.base64Encode=function(t){var e=a(t);return l.encodeByteArray(e,!0)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new y(t,e);return n.subscribe.bind(n)},e.decode=v,e.deepCopy=function(t){return c(void 0,t)},e.deepExtend=c,e.errorPrefix=x,e.getUA=p,e.isAdmin=function(t){var e=v(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},e.isElectron=function(){return p().indexOf("Electron/")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=p();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isUWP=function(){return p().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){var e=v(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=v(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){var e=v(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=b,e.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r},e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(x(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(x(t,e,r)+"must be a valid context object.")},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(x(t,e,r)+"must be a valid firebase namespace.")}}}]);